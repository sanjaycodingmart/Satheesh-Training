{"ast":null,"code":"var _jsxFileName = \"/home/satheeshkumar/Desktop/myapp/src/Fetch.js\";\nimport React, { Component } from 'react';\nimport Image from \"./Image\";\nimport './css/style.css';\nimport { connect } from 'react-redux';\nimport { Spin } from 'antd';\nimport * as firebase from 'firebase';\nwindow.$img_array = [];\n\nclass Fetch extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      books: '',\n      Images: [],\n      loading: false\n    };\n  }\n\n  async getdetails(search_key) {\n    var url = 'https://api.nytimes.com/svc/books/v3/lists/current/' + search_key + '.json?api-key=HUdzmG9oky8WRmLzxelOmioGiDHIm0VJ';\n    var response = await fetch(url);\n    var data = await response.json();\n    var image = data.results.books.map(e => e.book_image); // this.setState({\n    //   Images:image\n    // })\n\n    const ref = firebase.database().ref(\"fetch\");\n    ref.set(image);\n    ref.on(\"value\", gotdata, errordata);\n\n    function gotdata(data) {\n      window.$img_array = data.val();\n      console.log(window.$img_array);\n    }\n\n    function errordata(error) {\n      console.log(error);\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    this.getdetails(this.props.name);\n    setTimeout(() => {\n      this.setState({\n        loading: false\n      });\n    }, 2000);\n  }\n\n  render() {\n    return React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Book Details\")), React.createElement(\"div\", {\n      className: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Spin, {\n      spinning: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Image, {\n      obj: window.$img_array,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    name: state.name\n  };\n}\n\nexport default connect(mapStateToProps)(Fetch);","map":{"version":3,"sources":["/home/satheeshkumar/Desktop/myapp/src/Fetch.js"],"names":["React","Component","Image","connect","Spin","firebase","window","$img_array","Fetch","state","books","Images","loading","getdetails","search_key","url","response","fetch","data","json","image","results","map","e","book_image","ref","database","set","on","gotdata","errordata","val","console","log","error","componentDidMount","setState","props","name","setTimeout","render","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAO,iBAAP;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACAC,MAAM,CAACC,UAAP,GAAkB,EAAlB;;AAEA,MAAMC,KAAN,SAAoBP,SAApB,CAA8B;AAAA;AAAA;AAAA,SAC1BQ,KAD0B,GAClB;AACJC,MAAAA,KAAK,EAAC,EADF;AAEJC,MAAAA,MAAM,EAAC,EAFH;AAGJC,MAAAA,OAAO,EAAC;AAHJ,KADkB;AAAA;;AAOxB,QAAMC,UAAN,CAAiBC,UAAjB,EAA6B;AAC3B,QAAIC,GAAG,GAAC,wDAAsDD,UAAtD,GAAiE,gDAAzE;AACA,QAAIE,QAAQ,GAAC,MAAMC,KAAK,CAACF,GAAD,CAAxB;AACA,QAAIG,IAAI,GAAC,MAAMF,QAAQ,CAACG,IAAT,EAAf;AACA,QAAIC,KAAK,GAACF,IAAI,CAACG,OAAL,CAAaX,KAAb,CAAmBY,GAAnB,CAAwBC,CAAC,IAAEA,CAAC,CAACC,UAA7B,CAAV,CAJ2B,CAK3B;AACA;AACA;;AACA,UAAMC,GAAG,GAACpB,QAAQ,CAACqB,QAAT,GAAoBD,GAApB,CAAwB,OAAxB,CAAV;AACAA,IAAAA,GAAG,CAACE,GAAJ,CAAQP,KAAR;AACAK,IAAAA,GAAG,CAACG,EAAJ,CAAO,OAAP,EAAeC,OAAf,EAAuBC,SAAvB;;AACA,aAASD,OAAT,CAAiBX,IAAjB,EAAsB;AACpBZ,MAAAA,MAAM,CAACC,UAAP,GAAkBW,IAAI,CAACa,GAAL,EAAlB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY3B,MAAM,CAACC,UAAnB;AACD;;AACD,aAASuB,SAAT,CAAmBI,KAAnB,EAAyB;AACtBF,MAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACF;AACF;;AACDC,EAAAA,iBAAiB,GAAE;AACjB,SAAKC,QAAL,CAAc;AAACxB,MAAAA,OAAO,EAAC;AAAT,KAAd;AACA,SAAKC,UAAL,CAAgB,KAAKwB,KAAL,CAAWC,IAA3B;AACAC,IAAAA,UAAU,CAAC,MAAI;AACT,WAAKH,QAAL,CAAc;AAACxB,QAAAA,OAAO,EAAC;AAAT,OAAd;AACD,KAFK,EAEJ,IAFI,CAAV;AAGG;;AAEL4B,EAAAA,MAAM,GAAG;AACH,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,SAAS,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,CADJ,EAKI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,QAAQ,EAAE,KAAK/B,KAAL,CAAWG,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAEN,MAAM,CAACC,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CADJ,CALJ,CADA;AAaP;;AAhDyB;;AAiD9B,SAASkC,eAAT,CAAyBhC,KAAzB,EAAgC;AAC1B,SAAO;AACF6B,IAAAA,IAAI,EAAE7B,KAAK,CAAC6B;AADV,GAAP;AAGD;;AACL,eAAenC,OAAO,CAACsC,eAAD,CAAP,CAA0BjC,KAA1B,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport Image from \"./Image\"\nimport './css/style.css';\nimport { connect } from 'react-redux';\nimport { Spin } from 'antd';\nimport * as firebase from 'firebase';\nwindow.$img_array=[];\n\nclass Fetch extends Component {\n    state = {\n        books:'',\n        Images:[],\n        loading:false\n      }\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \n      async getdetails(search_key) {\n        var url='https://api.nytimes.com/svc/books/v3/lists/current/'+search_key+'.json?api-key=HUdzmG9oky8WRmLzxelOmioGiDHIm0VJ';\n        var response=await fetch(url);\n        var data=await response.json();\n        var image=data.results.books.map((e=>e.book_image));\n        // this.setState({\n        //   Images:image\n        // })\n        const ref=firebase.database().ref(\"fetch\");\n        ref.set(image);\n        ref.on(\"value\",gotdata,errordata);\n        function gotdata(data){\n          window.$img_array=data.val();\n          console.log(window.$img_array)\n        }\n        function errordata(error){\n           console.log(error)\n        }\n      }\n      componentDidMount(){\n        this.setState({loading:true})\n        this.getdetails(this.props.name);\n        setTimeout(()=>{\n              this.setState({loading:false})\n            },2000)\n          }\n      \n      render() { \n            return(\n            <main>\n                <div>\n                    <h1 className='heading'>Book Details</h1>\n                </div>\n\n                <div className='image'>\n                    <Spin spinning={this.state.loading}>\n                    <Image obj={window.$img_array}/>\n                    </Spin>\n                </div>\n            </main>\n            )\n    }}\nfunction mapStateToProps(state) {\n      return {\n           name: state.name \n          }\n    }\nexport default connect(mapStateToProps) (Fetch);\n"]},"metadata":{},"sourceType":"module"}